<html
  data-wf-page="61abfe484c11102a49b93145"
  data-wf-site="61abfe484c111013d3b93144"
>
  <head>
    <meta charset="utf-8" />
    <title>Window Control Centre</title>
    <meta
      content="Online dashboard to control my living room window"
      name="description"
    />
    <meta content="Window Control Centre" property="og:title" />
    <meta
      content="Online dashboard to control my living room window"
      property="og:description"
    />
    <meta content="Window Control Centre" property="twitter:title" />
    <meta
      content="Online dashboard to control my living room window"
      property="twitter:description"
    />
    <meta property="og:type" content="website" />
    <meta content="summary_large_image" name="twitter:card" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="Webflow" name="generator" />
    <link href="css/normalize.css" rel="stylesheet" type="text/css" />
    <link href="css/webflow.css" rel="stylesheet" type="text/css" />
    <link
      href="css/window-323a94.webflow.css"
      rel="stylesheet"
      type="text/css"
    />
    <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
    <script type="text/javascript">
      !(function (o, c) {
        var n = c.documentElement,
          t = " w-mod-";
        (n.className += t + "js"),
          ("ontouchstart" in o ||
            (o.DocumentTouch && c instanceof DocumentTouch)) &&
            (n.className += t + "touch");
      })(window, document);
    </script>
    <link href="images/favicon.jpg" rel="shortcut icon" type="image/x-icon" />
    <link href="images/webclip.jpg" rel="apple-touch-icon" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.6.0/chart.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="script.js"></script>
  </head>
  <body>
    <div class="div-block">
      <div class="w-layout-grid grid">
        <div
          id="w-node-fd71148a-52df-31ae-ce8a-d00e500e8a22-49b93145"
          class="div-block-2"
        >
          <h1 class="heading">Living room window control centre</h1>
          <h4 class="heading-copy">
            when life closes a door, it opens a publicly accessible window to my
            flat
          </h4>
          <div class="div-block-5">
            <h4 class="heading">Status: </h4>
            <h4 id="status" class="heading"> </h4>
            <button onclick="openWindow()" class="button w-button">open</button>
            <button onclick="closeWindow()" class="button w-button">
              close
            </button>
            <button onclick="stopWindow()" class="button w-button">stop</button>
          </div>
        </div>
        <div class="div-block-4">
          <h4 class="heading-2">Temperature</h4>
          <div class="w-embed"><canvas id="temp_chart"></canvas></div>
        </div>
        <div class="div-block-4">
          <h4 class="heading-2">Humidity</h4>
          <div class="w-embed"><canvas id="hum_chart"></canvas></div>
        </div>
        <div class="div-block-4">
          <h4 class="heading-2">Rain</h4>
          <div class="w-embed"><canvas id="rain_chart"></canvas></div>
        </div>
        <div class="div-block-4">
          <h4 class="heading-2">Wind</h4>
          <div class="w-embed"><canvas id="wind_chart"></canvas></div>
        </div>
      </div>
    </div>
    <div class="div-block-7">
      <div class="div-block-9">
        <div class="div-block-8">
          <div class="w-embed">
            <form id="myForm">
              <label for="myMessage">Send a message to Window:</label>
              <input id="myMessage" name="message" value="Hello" />
              <input type="submit" value="Send Me!" />
            </form>
          </div>
        </div>
      </div>
    </div>
    <script
      src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=61abfe484c111013d3b93144"
      type="text/javascript"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>
    <script src="js/webflow.js" type="text/javascript"></script>
    <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
    <script>
      plotAll();
      getStatus();

      const myForm = document.getElementById("myForm");

      myForm.addEventListener("submit", function (e) {
        e.preventDefault();

        const formData = new FormData(this);

        for (var [key, value] of formData.entries()) {
          console.log(value);
          fetch("https://window.eu.ngrok.io/message", {
            method: "post",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ message: value }),
          });
        }
      });
    </script>
  </body>
</html>
